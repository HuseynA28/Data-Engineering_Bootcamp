# SQL Query Guide

## Select All Data
To retrieve **all rows and columns** from the `customers` table:

```sql
SELECT * FROM classicmodels.customers;
```

- `*`: Fetches all columns.
- `classicmodels.customers`: Specifies the database (`classicmodels`) and table (`customers`).

## Select Specific Columns
To retrieve only specific columns (e.g., `customerName` and `addressLine1`):

```sql
SELECT
  customerName,
  addressLine1
FROM classicmodels.customers;
```

- Separate column names with commas.
- Always specify the table after `FROM`.

## Select Unique Rows
To remove duplicate values from a column (e.g., get unique countries):

```sql
SELECT DISTINCT country
FROM classicmodels.customers;
```

- `DISTINCT`: Returns only unique values from the specified column.

## COUNT Function
Counts the number of rows or non-null values in a column.

### Basic Syntax:

```sql
-- Count all rows in the table
SELECT COUNT(*) FROM classicmodels.customers;

-- Count non-null values in a specific column
SELECT COUNT(customerName) FROM classicmodels.customers;
```

### Count Unique Values:

```sql
-- Count distinct cities in the customers table
SELECT COUNT(DISTINCT city) FROM classicmodels.customers;
```

## WHERE Clause
Filters rows based on specified conditions.

### Basic Syntax:

```sql
SELECT column1, column2
FROM table
WHERE condition;
```

### Example:

```sql
-- Get customers from France or the USA
SELECT customerName
FROM classicmodels.customers
WHERE country = 'France' OR country = 'USA';
```

## Combining Conditions
Use logical operators (AND, OR, NOT) to combine conditions.

### Example:

```sql
-- Customers from France with credit limit over $50,000
SELECT customerName, creditLimit
FROM classicmodels.customers
WHERE country = 'France' AND creditLimit > 50000;
```

## Filter Orders Example

```sql
-- Get all "Shipped" orders placed before 2005
SELECT orderNumber, orderDate
FROM classicmodels.orders
WHERE status = 'Shipped' AND orderDate < '2005-01-01';
```

## Low-Stock Products Example

```sql
-- Find products with fewer than 100 items in stock
SELECT productName, quantityInStock
FROM classicmodels.products
WHERE quantityInStock < 100;
```

## SQL Comparison Operators

### Comparison Operators Reference

| Operator | Description                  | SQL Symbol |
|----------|------------------------------|------------|
| Equal    | Exact match                  | `=`        |
| Greater than | Larger numerical value  | `>`        |
| Less than | Smaller numerical value  | `<`        |
| Greater than or equal to | Minimum value threshold | `>=` |
| Less than or equal to | Maximum value threshold | `<=` |
| Not equal to | Exclude specific values | `<>` or `!=` |

### Examples

```sql
-- Find all customers from France
SELECT customerName, country 
FROM classicmodels.customers 
WHERE country = 'France';
```

```sql
-- Products priced above $100
SELECT productName, buyPrice 
FROM classicmodels.products 
WHERE buyPrice > 100;
```

```sql
-- Orders placed before 2004
SELECT orderNumber, orderDate 
FROM classicmodels.orders 
WHERE orderDate < '2004-01-01';
```

```sql
-- Customers with credit limit of $50,000 or more
SELECT customerName, creditLimit 
FROM classicmodels.customers 
WHERE creditLimit >= 50000;
```

```sql
-- Offices not in the USA
SELECT officeCode, country 
FROM classicmodels.offices 
WHERE country != 'USA';
```

##  ORDER BY Clause
Sorts results by specified column(s) in ascending (`ASC`) or descending (`DESC`) order.

### Basic Syntax:

```sql
SELECT column1, column2
FROM table
ORDER BY column [ASC|DESC];
```

### Examples:

```sql
-- Sort customers by credit limit (lowest to highest)
SELECT customerName, creditLimit
FROM classicmodels.customers
ORDER BY creditLimit;
```

```sql
-- Sort customers by credit limit (highest to lowest)
SELECT customerName, creditLimit
FROM classicmodels.customers
ORDER BY creditLimit DESC;
```

## LIMIT Clause
Restricts the number of rows returned. Often paired with ORDER BY for "top N" queries.

### Examples:

```sql
-- Get the top 3 customers by credit limit
SELECT customerName, creditLimit
FROM classicmodels.customers
ORDER BY creditLimit DESC
LIMIT 3;
```

```sql
-- Get the single highest credit limit
SELECT customerName, creditLimit
FROM classicmodels.customers
ORDER BY creditLimit DESC
LIMIT 1;
```

##  BETWEEN and IN Operators
### BETWEEN Operator
Filters values within a specified range (inclusive of endpoints).

```sql
-- Count orders from 2003-01-16 to 2003-04-16
SELECT COUNT(*)
FROM classicmodels.orders
WHERE orderDate BETWEEN '2003-01-16' AND '2003-04-16';
```

```sql
-- Get checks for amounts $6,000 to $10,000
SELECT checkNumber
FROM classicmodels.payments
WHERE amount BETWEEN 6000 AND 10000;
```

Use `NOT BETWEEN` to exclude a range:

```sql
-- Orders outside the date range
SELECT COUNT(*)
FROM classicmodels.orders
WHERE orderDate NOT BETWEEN '2003-01-16' AND '2003-04-16';
```

### IN Operator
Checks if a value matches any in a list.

```sql
-- Find customers located in Azerbaijan
SELECT customerName, country
FROM classicmodels.customers
WHERE country IN ('Azerbaijan');
```

```sql
-- Customers in Azerbaijan, France, or the USA
SELECT customerName, country
FROM classicmodels.customers
WHERE country IN ('Azerbaijan', 'France', 'USA');
```

Equivalent to multiple `OR` conditions:

```sql
WHERE country = 'Azerbaijan' OR country = 'France' OR country = 'USA';
```

### Combining BETWEEN and IN

```sql
-- French customers with credit limits between $30k-$60k
SELECT customerName, creditLimit
FROM classicmodels.customers
WHERE country IN ('France')
  AND creditLimit BETWEEN 30000 AND 60000;
```

🚨 **Watch Out:** Always validate date/time formats and column data types. For precise time ranges, use:

```sql
WHERE orderDate >= '2003-01-16 00:00:00' 
  AND orderDate <= '2003-04-16 23:59:59';

# SQL Pattern Matching with `LIKE`

Learn to search for patterns in text data using wildcards and handle case sensitivity in MySQL.

---

## 1. `LIKE` Operator Basics
Matches string patterns using wildcards:

| Wildcard | Description                     | Example                     |
|----------|---------------------------------|-----------------------------|
| `%`      | Matches **any sequence** of characters | `'A%'` → "Apple", "Ant"     |
| `_`      | Matches **exactly one** character     | `'_at'` → "Cat", "Bat", but not "Cart" |

---

## 2. Key Examples

### Find Employees with First Names Starting with "A":
```sql
SELECT *
FROM classicmodels.employees
WHERE firstName LIKE 'A%';
```
Matches "Amy", "Anthony", but not "amy" (case-sensitive in some collations).

---

## 3. Case Sensitivity in MySQL
MySQL's `LIKE` is case-insensitive by default for collations ending with `_ci` (e.g., `utf8_general_ci`).
For case-sensitive searches:

```sql
-- Match only lowercase "a" using BINARY
WHERE BINARY firstName LIKE 'a%';
```

Match "a" or "A":

```sql
-- Use LOWER() for case-insensitive matching
SELECT *
FROM classicmodels.employees
WHERE LOWER(firstName) LIKE 'a%';
```

---

## 4. Advanced Pattern Matching

### Payments in May 2004 with Check Numbers Starting with "N":
```sql
SELECT *
FROM classicmodels.payments
WHERE paymentDate LIKE '2004-05-%'    
  AND checkNumber LIKE 'N%';         
```

### Customers with "nal" Anywhere in Name:
```sql
SELECT *
FROM classicmodels.customers
WHERE customerName LIKE '%nal%';  
```

### Names Ending with "lan" + 1 Character:
```sql
SELECT *
FROM classicmodels.customers
WHERE customerName LIKE '%lan_';  

---

## 5. `NOT LIKE` Operator
Exclude rows matching a pattern:

```sql
-- Customers without "nal" in their name
SELECT *
FROM classicmodels.customers
WHERE customerName NOT LIKE '%nal%';
```

---

## 6. Common Pitfalls & Fixes

### Problem: Missing Single-Digit Dates
```sql
-- ❌ Fails to match '2004-05-05'
WHERE paymentDate LIKE '2004-05-__';
```
**Fix:** Use `LIKE '2004-05-%'` to include all days in May.

### Problem: Case Sensitivity Confusion
**Solution:** Use `LOWER()`, `UPPER()`, or `BINARY` as needed.

---

## 💡 MySQL vs PostgreSQL

- MySQL uses `LIKE` (case-insensitive by default).
- PostgreSQL has `ILIKE` for case-insensitive matching.
- Always test your collation settings with:

```sql
SHOW VARIABLES LIKE 'collation%';
```

**Force case-sensitive match in MySQL:**
```sql
SELECT *
FROM classicmodels.employees
WHERE BINARY firstName LIKE 'a%';  -- Only lowercase "a"
