## SQL Aggregate Functions & GROUP BY: Simplified Guide for Students

Aggregate functions perform calculations on a set of values and return a single value. They help summarize data in SQL.

### 1. AVG()
**Purpose:** Calculates the average of a numeric column.

```sql
SELECT AVG(amount) AS average_payment 
FROM classicmodels.payments;
```

### 2. COUNT()
**Purpose:** Counts the number of rows in a column (including NULLs if `COUNT(*)` is used).

```sql
SELECT COUNT(*) AS total_orders 
FROM classicmodels.orders;
```

### 3. MAX()
**Purpose:** Finds the maximum value in a column.

```sql
SELECT MAX(amount) AS highest_payment 
FROM classicmodels.payments;
```

### 4. MIN()
**Purpose:** Finds the minimum value in a column.

```sql
SELECT MIN(amount) AS lowest_payment 
FROM classicmodels.payments;
```

### 5. SUM()
**Purpose:** Calculates the sum of a numeric column.

```sql
SELECT SUM(amount) AS total_revenue 
FROM classicmodels.payments;
```

### 6. ROUND()
**Purpose:** Rounds a numeric value to a specified number of decimal places.

```sql
SELECT ROUND(AVG(amount), 2) AS avg_rounded 
FROM classicmodels.payments;
```

### Common Pitfall: Mixing Aggregated & Non-Aggregated Columns
Using an aggregate function with a non-aggregated column without `GROUP BY` causes an error.

 **Wrong Query:**
```sql
SELECT MAX(amount), paymentDate 
FROM classicmodels.payments;
```
**Solution (Use GROUP BY):**
```sql
SELECT paymentDate, MAX(amount) 
FROM classicmodels.payments 
GROUP BY paymentDate;
```

## GROUP BY 
**Purpose:** Groups rows by a columnâ€™s value, then applies aggregate functions to each group.

### Example: Total Payments Per Day
```sql
SELECT 
  paymentDate, 
  SUM(amount) AS daily_total 
FROM classicmodels.payments 
GROUP BY paymentDate;
```
**How It Works:**
- Groups rows by `paymentDate`.
- `SUM(amount)` calculates the total for each group.
- Returns one row per unique `paymentDate` with its total.

### Putting It All Together: Payment Statistics
```sql
SELECT 
  paymentDate,
  MAX(amount) AS highest_payment,
  MIN(amount) AS lowest_payment,
  ROUND(AVG(amount), 2) AS avg_payment,
  SUM(amount) AS daily_total 
FROM classicmodels.payments 
GROUP BY paymentDate;
```

## Key Takeaways
- Aggregate functions collapse rows into a single value.
- Use `GROUP BY` to split data into groups before applying aggregates.
- All non-aggregated columns in `SELECT` must be in `GROUP BY`.
- Use `ROUND()` to format results for readability.